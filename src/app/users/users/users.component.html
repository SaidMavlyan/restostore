<app-page-title title="All Users">
  <button mat-fab title="Create new user" color="accent" (click)="createUser()">
    <mat-icon>add</mat-icon>
  </button>
</app-page-title>

<table [dataSource]="dataSource" class="mat-elevation-z8" mat-table matSort>

  <tr *matHeaderRowDef="displayedColumns" mat-header-row></tr>
  <tr *matRowDef="let row; columns: displayedColumns;" mat-row></tr>

  <ng-container matColumnDef="uid">
    <th *matHeaderCellDef mat-header-cell mat-sort-header>UID</th>
    <td *matCellDef="let row" mat-cell> {{row.uid}} </td>
  </ng-container>

  <ng-container matColumnDef="displayName">
    <th *matHeaderCellDef mat-header-cell mat-sort-header> Name</th>
    <td *matCellDef="let row" mat-cell> {{row.displayName}} </td>
  </ng-container>

  <ng-container matColumnDef="email">
    <th *matHeaderCellDef mat-header-cell mat-sort-header> Email</th>
    <td *matCellDef="let row" mat-cell> {{row.email}} </td>
  </ng-container>

  <ng-container matColumnDef="role">
    <th *matHeaderCellDef mat-header-cell mat-sort-header> Role</th>
    <td *matCellDef="let row" mat-cell> {{row.role}} </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th *matHeaderCellDef mat-header-cell> Actions</th>
    <td *matCellDef="let row" mat-cell>
      <div fxLayout="row" fxLayoutGap="10px">
      </div>

      <div dir="rtl" fxLayout="row" fxLayoutGap="10px">
        <button (click)="deleteUser(row)" [disabled]="row.role === 'admin' && !isAdmin()"
                color="primary"
                mat-mini-fab>
          <mat-icon>delete_sweep</mat-icon>
        </button>
        <button (click)="editUser(row)" [disabled]="row.role === 'admin' && !isAdmin()"
                color="primary"
                mat-mini-fab>
          <mat-icon>create</mat-icon>
        </button>
      </div>
    </td>
  </ng-container>

</table>

<mat-paginator [pageSizeOptions]="pageSizeOptions" class="mat-elevation-z8" showFirstLastButtons></mat-paginator>
